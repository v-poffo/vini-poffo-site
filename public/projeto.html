<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projeto - Vini Poffo</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .projeto-hero {
            background-color: var(--primary-black);
            color: var(--primary-white);
            padding: 4rem 2rem;
            min-height: 500px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .projeto-hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(rgba(0, 0, 0, 0.6), rgba(0, 0, 0, 0.6));
            z-index: 1;
        }

        .projeto-hero video {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 0;
        }

        .projeto-hero-content {
            max-width: 900px;
            text-align: center;
            position: relative;
            z-index: 2;
        }

        .projeto-hero h1.page-title {
            /* Usando page-title class para estilo */
        }

        .projeto-meta {
            font-size: 1.1rem;
            color: var(--accent-green);
            margin-bottom: 1rem;
        }

        .projeto-content {
            max-width: 900px;
            margin: 0 auto;
            padding: 4rem 2rem 6rem 2rem;
            background-color: var(--primary-black);
            color: var(--primary-white);
        }

        .projeto-video {
            width: 100%;
            aspect-ratio: 16 / 9;
            margin-bottom: 2rem;
            border-radius: 4px;
            overflow: hidden;
            background-color: var(--primary-black);
        }

        .projeto-video iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        .projeto-description-hero {
            margin-top: 1.5rem;
            font-size: 1rem;
            line-height: 1.8;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .projeto-description-hero p {
            color: var(--primary-white);
            text-align: justify;
            margin: 0;
        }

        .projeto-content-columns {
            display: grid;
            grid-template-columns: 1fr 1.5fr;
            gap: 3rem;
            margin-top: 3rem;
            align-items: start;
        }

        .projeto-credits-column {
            display: flex;
            flex-direction: column;
        }

        .projeto-ficha {
            align-self: start;
            background-color: rgba(255, 255, 255, 0.05);
            padding: 2rem;
            border-radius: 4px;
            margin-bottom: 3rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .projeto-ficha h3 {
            margin-top: 0;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--accent-green);
            padding-bottom: 1rem;
            color: var(--primary-white);
        }

        .ficha-item {
            display: flex;
            justify-content: space-between;
            padding: 0.5rem 0;
            border-bottom: 1px solid var(--border-color);
        }

        .ficha-item:last-child {
            border-bottom: none;
        }

        .ficha-label {
            font-weight: 600;
            color: var(--primary-white);
        }

        .ficha-value {
            color: rgba(255, 255, 255, 0.8);
        }

        .back-button {
            display: inline-block;
            margin-bottom: 2rem;
            padding: 0.8rem 1.5rem;
            background-color: var(--accent-green-light);
            color: var(--primary-white);
            text-decoration: none;
            border-radius: 4px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .back-button:hover {
            transform: translateX(-5px);
        }

        .related-projects {
            margin-top: 6rem;
            padding-top: 3rem;
            border-top: 2px solid rgba(255, 255, 255, 0.1);
        }

        .related-projects h2 {
            margin-bottom: 2rem;
            color: var(--primary-white);
        }

        .related-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .project-card {
            text-decoration: none;
            color: inherit;
            display: block;
            background-color: var(--primary-white);
            border-radius: 4px;
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .project-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }

        .project-card-image {
            width: 100%;
            height: auto;
            object-fit: contain;
            display: block;
            background-color: var(--primary-white);
            min-height: 200px;
        }

        .project-card-content {
            padding: 1rem;
            background-color: var(--primary-white);
        }

        .project-card-title {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--primary-black);
            margin: 0;
            line-height: 1.3;
        }

        .project-card-meta {
            font-size: 0.8rem;
            color: var(--dark-gray);
            margin-top: 0.3rem;
        }

        .project-card-type {
            display: inline-block;
            background-color: var(--accent-green-light);
            color: var(--primary-white);
            padding: 0.3rem 0.8rem;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            margin-top: 0.5rem;
        }

        .projeto-credits {
            background-color: rgba(255, 255, 255, 0.05);
            padding: 2rem;
            border-radius: 4px;
            margin-top: 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .projeto-credits h3 {
            margin-top: 0;
            margin-bottom: 1.5rem;
            border-bottom: 2px solid var(--accent-green);
            padding-bottom: 1rem;
            color: var(--primary-white);
        }

        .credit-item {
            display: grid;
            grid-template-columns: 200px 1fr;
            gap: 1rem;
            padding: 0.8rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }

        .credit-item:last-child {
            border-bottom: none;
        }

        .credit-item.apoio {
            grid-template-columns: 1fr;
            text-align: center;
            padding: 1rem 0;
            font-style: italic;
            color: var(--accent-green);
        }

        .credit-label {
            font-weight: 600;
            color: var(--primary-white);
            text-transform: uppercase;
            font-size: 0.85rem;
        }

        .credit-value {
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .projeto-hero {
                padding: 3rem 1.5rem;
                min-height: auto;
            }

            .projeto-content {
                padding: 3rem 1.5rem;
            }

            .projeto-ficha {
                padding: 1.5rem;
            }

            .ficha-item {
                flex-direction: column;
                gap: 0.5rem;
            }

            .related-grid {
                grid-template-columns: 1fr;
            }

            .credit-item {
                grid-template-columns: 1fr;
                gap: 0.3rem;
            }

            .credit-label {
                font-size: 0.75rem;
            }

            .projeto-content-columns {
                grid-template-columns: 1fr;
                gap: 2rem;
            }
        }
    </style>
</head>
<body style="background-color: #111A17;">
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">
                    <img src="assets/logo/logo.avif" alt="Vini Poffo" class="logo-img">
                </a>
            </div>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
            <ul class="nav-menu">
                <li><a href="index.html">Início.</a></li>
                <li><a href="projetos.html">Projetos.</a></li>
                <li><a href="sobre.html">Sobre.</a></li>
            </ul>
        </div>
    </nav>

    <!-- Projeto Hero -->
    <section class="projeto-hero">
        <div class="projeto-hero-content">
            <a href="projetos.html" class="back-button">← Voltar aos Projetos</a>
            <div id="projectHero"></div>
        </div>
    </section>

    <!-- Projeto Content -->
    <section class="projeto-content">
        <div id="projectDetails"></div>

        <!-- Related Projects -->
        <div class="related-projects">
            <h2>Outros Projetos</h2>
            <div id="relatedProjects" class="related-grid"></div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-container">
            <p>&copy; 2025 Vini Poffo. Todos os direitos reservados.</p>
            <div class="social-links">
                <a href="https://instagram.com/pofovini" target="_blank">Instagram</a>
                <a href="mailto:projetos@vinipoffo.com">Email</a>
            </div>
        </div>
    </footer>

    <script src="data.js"></script>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const projectId = getUrlParameter('id');
            const project = siteData.projects.find(p => p.id == projectId);

            if (!project) {
                document.getElementById('projectDetails').innerHTML = '<p>Projeto não encontrado.</p>';
                return;
            }

            // Renderizar hero
            const heroHTML = `
                <h1 class="page-title">${project.title}</h1>
                <div class="projeto-meta">
                    <span>${project.year}</span> • 
                    <span>${project.type}</span>
                    ${project.artist ? `<span> • ${project.artist}</span>` : ''}
                </div>
                <div class="projeto-description-hero">
                    <p>${project.description}</p>
                </div>
            `;
            document.getElementById('projectHero').innerHTML = heroHTML;

            // Adicionar video de fundo ao hero
            if (project.videoHome) {
                const heroSection = document.querySelector('.projeto-hero');
                const video = document.createElement('video');
                video.src = `assets/videos/${project.videoHome}`;
                video.autoplay = true;
                video.muted = true;
                video.loop = true;
                video.playsinline = true;
                heroSection.appendChild(video);
            }

            // Renderizar detalhes
            let videoHTML;
            if (project.trailerUrl.includes('youtube') || project.trailerUrl.includes('youtu.be')) {
                let videoId;
                if (project.trailerUrl.includes('youtu.be/')) {
                    videoId = project.trailerUrl.split('youtu.be/')[1].split('?')[0];
                } else if (project.trailerUrl.includes('watch?v=')) {
                    videoId = project.trailerUrl.split('watch?v=')[1].split('&')[0];
                } else if (project.trailerUrl.includes('embed/')) {
                    videoId = project.trailerUrl.split('embed/')[1].split('?')[0];
                }
                const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
                // Detectar se é mobile
                const isMobile = /iPhone|iPad|iPod|Android|webOS|BlackBerry|Windows Phone/i.test(navigator.userAgent);
                const youtubeUrl = `https://www.youtube.com/watch?v=${videoId}`;
                const youtubeLink = isMobile ? youtubeUrl : '#';
                const onClickHandler = isMobile ? `window.open('${youtubeUrl}', '_blank'); return false;` : `openYouTubeModal('${videoId}'); return false;`;
                
                videoHTML = `
                    <div class="projeto-video youtube-thumbnail">
                        <a href="${youtubeLink}" onclick="${onClickHandler}" ${isMobile ? 'target="_blank" rel="noopener noreferrer"' : ''}>
                            <img src="${thumbnailUrl}" alt="${project.title}">
                            <div class="play-button">
                                <svg viewBox="0 0 24 24" width="100%" height="100%" fill="currentColor">
                                    <polygon points="5 3 19 12 5 21"/>
                                </svg>
                            </div>
                        </a>
                    </div>
                `;
                
                // Adicionar modal ao final da página
                if (!document.getElementById('youtubeModal')) {
                    const modal = document.createElement('div');
                    modal.id = 'youtubeModal';
                    modal.className = 'youtube-modal';
                    modal.innerHTML = `
                        <div class="youtube-modal-content">
                            <span class="youtube-modal-close" onclick="closeYouTubeModal()">&times;</span>
                            <iframe id="youtubeIframe" width="100%" height="100%" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
                        </div>
                    `;
                    document.body.appendChild(modal);
                }
            
                window.openYouTubeModal = function(videoId) {
                    const modal = document.getElementById('youtubeModal');
                    const iframe = document.getElementById('youtubeIframe');
                    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;
                    modal.style.display = 'block';
                    document.body.style.overflow = 'hidden';
                };
                
                window.closeYouTubeModal = function() {
                    const modal = document.getElementById('youtubeModal');
                    const iframe = document.getElementById('youtubeIframe');
                    iframe.src = '';
                    modal.style.display = 'none';
                    document.body.style.overflow = 'auto';
                };
                
                window.addEventListener('click', function(event) {
                    const modal = document.getElementById('youtubeModal');
                    if (event.target === modal) {
                        closeYouTubeModal();
                    }
                });
            } else {
                const embedUrl = project.trailerUrl.replace('vimeo.com/', 'player.vimeo.com/video/');
                videoHTML = `
                    <div class="projeto-video">
                        <iframe src="${embedUrl}" allowfullscreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"></iframe>
                    </div>
                `;
            }

            const detailsHTML = `
                ${videoHTML}

                <div class="projeto-content-columns">
                    <div class="projeto-ficha">
                    <h3>Ficha Técnica</h3>
                    <div class="ficha-item">
                        <span class="ficha-label">Título</span>
                        <span class="ficha-value">${project.title}</span>
                    </div>
                    <div class="ficha-item">
                        <span class="ficha-label">Ano</span>
                        <span class="ficha-value">${project.year}</span>
                    </div>
                    <div class="ficha-item">
                        <span class="ficha-label">Tipo</span>
                        <span class="ficha-value">${project.type}</span>
                    </div>
                    ${project.artist ? `
                    <div class="ficha-item">
                        <span class="ficha-label">Artista/Produção</span>
                        <span class="ficha-value">${project.artist}</span>
                    </div>
                    ` : ''}
                    <div class="ficha-item">
                        <span class="ficha-label">Direção</span>
                        <span class="ficha-value">Vini Poffo</span>
                    </div>
                    ${project.duracao ? `
                    <div class="ficha-item">
                        <span class="ficha-label">Duração</span>
                        <span class="ficha-value">${project.duracao}</span>
                    </div>
                    ` : ''}
                    </div>
                    <div class="projeto-credits-column">
            `;

            // Adicionar créditos se existirem
            let creditsHTML = '';
            if (project.credits) {
                creditsHTML = `
                    <div class="projeto-credits">
                        <h3>Créditos</h3>
                `;

                const creditLabels = {
                    producao: "Produção",
                    elenco: "Elenco",
                    direcao: "Direção",
                    roteiro: "Roteiro",
                    preparacaoElenco: "Preparação de Elenco",
                    direcaoFotografia: "Direção de Fotografia",
                    operadoraCamera: "Operadora de Câmera",
                    concepcaoArte: "Concepção de Arte",
                    direcaoArte: "Direção de Arte",
                    design: "Design",
                    direcaoSom: "Direção de Som",
                    trilhaSonora: "Trilha Sonora",
                    producaoExecutiva: "Produção Executiva",
                    controller: "Controller",
                    direcaoProducao: "Direção de Produção",
                    makingOf: "Making Of",
                    fotografiaStill: "Fotografia Still"
                };

                for (const [key, label] of Object.entries(creditLabels)) {
                    if (project.credits[key]) {
                        const names = Array.isArray(project.credits[key]) ? project.credits[key].join(", ") : project.credits[key];
                        creditsHTML += `
                            <div class="credit-item">
                                <span class="credit-label">${label}</span>
                                <span class="credit-value">${names}</span>
                            </div>
                        `;
                    }
                }

                if (project.credits.apoio) {
                    creditsHTML += `
                        <div class="credit-item apoio">
                            <span class="credit-value">${project.credits.apoio}</span>
                        </div>
                    `;
                }

                creditsHTML += `</div>`;
            }

            creditsHTML += `
                    </div>
                </div>
            `;

            document.getElementById('projectDetails').innerHTML = detailsHTML + creditsHTML;

            // Renderizar projetos relacionados
            const relatedProjects = siteData.projects.filter(p => p.id != projectId).slice(0, 3);
            let relatedHTML = '';
            relatedProjects.forEach(p => {
                relatedHTML += `
                    <a href="projeto.html?id=${p.id}" class="project-card">
                        <img src="assets/cartazes/${p.cartazMobile}" alt="${p.title}" class="project-card-image">
                        <div class="project-card-content">
                            <h3 class="project-card-title">${p.title}</h3>
                            <p class="project-card-meta">${p.year}</p>
                            <span class="project-card-type">${p.type}</span>
                        </div>
                    </a>
                `;
            });
            document.getElementById('relatedProjects').innerHTML = relatedHTML;
        });
    </script>
</body>
</html>
